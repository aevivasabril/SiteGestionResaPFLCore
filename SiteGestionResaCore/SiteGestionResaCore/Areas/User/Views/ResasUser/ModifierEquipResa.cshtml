@model SiteGestionResaCore.Areas.User.Data.ResasUser.ModifierEquipVM

@{
    ViewData["Title"] = "ModifierEquipResa";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<br />
<h1>Supprimer ou rajouter des équipements sur mon essai</h1>
<p class="text-center">Vous pouvez supprimer et rajouter si nécessaire des équipements à votre essai</p>

@if (ViewBag.AfficherMessage == true)
{
    <p class="text-center" style="color:green"><strong> @ViewBag.Message</strong> </p>
}

@Html.ValidationSummary(true, "", new { @class = "text-danger" })
<div class="row">
    <table class="table table-sm">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Zone</th>
                <th scope="col">Nom Equipement</th>
                <th scope="col">Date Début</th>
                <th scope="col">Date Fin</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var r in Model.ListResas)
            {
                <tr>
                    <td>@r.ZoneEquipement</td>
                    <td>@r.NomEquipement</td>
                    <td>@r.DateDebut</td>
                    <td>@r.DateFin</td>
                    <td>
                        <a class="btn btn-default" data-toggle="tooltip" data-placement="top" title="Supprimer" asp-action="PreSupprimerResa" asp-area="User" asp-controller="ResasUser" asp-route-id="@r.IdResa">
                            <span class="fas fa-trash"></span>
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<div class="row">
    <div class="offset-4 col-md-4 text-center">
        <!-- Rediriger vers le controleur "Reservation" envoyer quelconque id essai-->
        <a class="btn navbar-inra" asp-action="PlanZonesReservationXAjout" asp-controller="Reservation" asp-area="Reservation" asp-route-id="@Model.IdEssai">Ajouter un(s) équipement(s) à ma réservation</a>
    </div>
    <div class="col-md-6">
        <a asp-action="MesReservations" asp-controller="ResasUser" asp-area="User">Revenir à la page précedente</a>
    </div>
</div>


<!-- Modal pour affichage de la confirmation "supression"-->
<form asp-action="SupprimerResa" asp-controller="ResasUser" asp-area="User" asp-route-id="@Model.IdResa" method="post">
    <!-- Modal pop-up d'info-->
    <div class="modal fade" id="ConfirmSupp" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="myModal" aria-hidden="true">
        <div class="modal-dialog modal-sm navbar-inra">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center" id="staticBackdropLabel">Confirmation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="modalcontent">
                    <p class="font-weight-bold">
                        Cette réservation sera supprimée définitivement de votre essai, on continue?
                        @Html.HiddenFor(m=>m.IdEssai)
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
                    <input type="submit" class="btn btn-primary" value="Oui" />
                </div>
            </div>
        </div>
    </div>
</form>

@section Scripts {
    @*script pour afficher le popoup de confirmation de demande *@
    <script>
        @{
            if (ViewBag.modalConfirm == null)
            {
                ViewBag.modalConfirm = "hide";
            }
        }
        $('#ConfirmSupp').modal('@ViewBag.modalConfirm');
    </script>
}